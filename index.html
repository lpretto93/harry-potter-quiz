<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gioco Hogwarts</title>
    <style>
        /* Stili generali */
        body {
            font-family: Arial, sans-serif;
            background-color: #2c3e50;
            color: white;
            text-align: center;
        }

        .screen {
            display: none;
        }

        .active {
            display: block;
        }

        .logo {
            width: 200px;
            margin: 30px auto;
        }

        .start-button {
            width: 100px;
            margin-top: 30px;
            cursor: pointer;
        }

        #houses-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .house {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
        }

        #question-container {
            margin-top: 30px;
        }

        #answers-container button {
            margin: 10px;
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
            background-color: #3498db;
            border: none;
            color: white;
        }

        #next-question {
            margin-top: 20px;
            display: none;
            padding: 10px 20px;
            background-color: #2ecc71;
            color: white;
            border: none;
            cursor: pointer;
        }

        #next-question:hover {
            background-color: #27ae60;
        }
    </style>
</head>
<body>

<!-- Schermata Iniziale (nome utente) -->
<div id="start-screen" class="screen active">
    <img src="images/hogwarts.png" alt="Hogwarts Logo" class="logo">
    <h1>Benvenuto alla Scuola di Magia e Stregoneria di Hogwarts!</h1>
    <p>Caro futuro mago o strega,</p>
    <p>Una lettera speciale è arrivata per te! Hogwarts ti sta invitando ad iniziare un viaggio straordinario nel mondo della magia. Qui, tra antiche mura e misteriose creature, imparerai incantesimi, pozioni e segreti millenari. Ma prima di intraprendere questa incredibile avventura, c'è una cosa importante da fare...</p>
    <p>Per favore, dicci il tuo nome, così potremo prepararti per la tua magica avventura!</p>
    <input type="text" id="username-input" placeholder="Inserisci il tuo nome magico">
    <img src="images/next-page.png" alt="Inizia" class="start-button" onclick="startGame()">
</div>

<!-- Schermata della Lettera -->
<div id="letter-screen" class="screen">
    <img src="images/hogwarts.png" alt="Hogwarts Logo" class="logo">
    <p id="letter-text"></p>
    <img src="images/next-page.png" alt="Inizia" class="start-button" onclick="goToHousesScreen()">
</div>

<!-- Schermata delle Casate -->
<div id="houses-screen" class="screen">
    <img src="images/hogwarts.png" alt="Hogwarts Logo" class="logo">
    <h1>Scegli la tua casata preferita</h1>
    <div id="houses-container">
        <!-- Casate dinamiche -->
    </div>
</div>

<!-- Schermata del Quiz -->
<div id="quiz-screen" class="screen">
    <img src="images/hogwarts.png" alt="Hogwarts Logo" class="logo">
    <h1>Pronto per il quiz?</h1>
    <p>Scegli la risposta giusta e scopri la tua vera casata!</p>
    <div id="question-container">
        <p id="question"></p>
        <div id="answers-container">
            <button onclick="checkAnswer('A')">Risposta A</button>
            <button onclick="checkAnswer('B')">Risposta B</button>
            <button onclick="checkAnswer('C')">Risposta C</button>
            <button onclick="checkAnswer('D')">Risposta D</button>
        </div>
    </div>
    <button id="next-question" onclick="nextQuestion()">Prossima domanda</button>
</div>

<script>
    let selectedHouse = '';
    let currentQuestionIndex = 0;
    let questions = [];
    let playerName = '';

    // Funzione per iniziare il gioco e ottenere il nome del giocatore
    function startGame() {
        playerName = document.getElementById('username-input').value;
        if (playerName.trim() !== '') {
            // Mostra la schermata della lettera e sostituisci il nome
            document.getElementById('start-screen').classList.remove('active');
            document.getElementById('letter-screen').classList.add('active');
            document.getElementById('letter-text').innerHTML = `Carissimo ${playerName},<br><br>
                Abbiamo il piacere di informarti che sei stato ufficialmente accettato alla Scuola di Magia e Stregoneria di Hogwarts!<br><br>
                Prepara la tua bacchetta e mettiti comodo, perché ti stai per immergere in un mondo straordinario, dove ogni angolo nasconde misteri, avventure e possibilità infinite.`;
        } else {
            alert("Per favore inserisci il tuo nome.");
        }
    }

    // Funzione per andare alla schermata delle casate
    function goToHousesScreen() {
        document.getElementById('letter-screen').classList.remove('active');
        document.getElementById('houses-screen').classList.add('active');
        loadHouses();
    }

    // Funzione per caricare dinamicamente le casate
    function loadHouses() {
        const houses = ['Grifondoro', 'Tassorosso', 'Corvonero', 'Serpeverde'];
        const container = document.getElementById('houses-container');
        houses.forEach(house => {
            let houseElement = document.createElement('div');
            houseElement.classList.add('house');
            houseElement.setAttribute('data-house', house);
            houseElement.innerHTML = `
                <img src="images/houses/${house}.png" alt="${house}">
                <p>${house}</p>`;
            houseElement.onclick = () => startQuiz(house);
            container.appendChild(houseElement);
        });
    }

    // Funzione per avviare il quiz con la casata selezionata
    function startQuiz(house) {
        selectedHouse = house;
        document.getElementById('houses-screen').classList.remove('active');
        document.getElementById('quiz-screen').classList.add('active');
        loadQuestions();
    }

    // Funzione per caricare le domande dal file JSON
    async function loadQuestions() {
        const response = await fetch('questions.json');
        const data = await response.json();
        questions = data.questions; // Supponiamo che il JSON abbia una struttura { questions: [...] }
        loadQuestion();
    }

    // Funzione per caricare una domanda
    function loadQuestion() {
        if (currentQuestionIndex < questions.length) {
            document.getElementById('question').textContent = questions[currentQuestionIndex].question;
            let answers = questions[currentQuestionIndex].answers;
            let buttons = document.querySelectorAll('#answers-container button');
            buttons.forEach((button, index) => {
                button.textContent = answers[index];
            });
            document.getElementById('next-question').style.display = 'none';
        } else {
            // Risultato finale
            alert('Quiz completato!');
        }
    }

    // Funzione per verificare la risposta
    function checkAnswer(answer) {
        let correctAnswer = questions[currentQuestionIndex].correctAnswer;
        if (answer === correctAnswer) {
            alert('Risposta corretta!');
        } else {
            alert('Risposta sbagliata!');
        }
        currentQuestionIndex++;
        document.getElementById('next-question').style.display = 'block';
    }

    // Funzione per passare alla prossima domanda
    function nextQuestion() {
        loadQuestion();
    }
</script>

</body>
</html>
